<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8"/>
    <title>Battery Stats</title>
    <link rel="stylesheet" href="index.css"/>
  </head>
  <body>
    <header style="background-color:#F1F6F9;color:#696E71;">
      <nav>
        
      </nav>
      <!-- menu icon -->
      <p>Battery Stats</p>
      <div>
        <!-- percentage bar -->
        <p style="color:#898E92">68%</p>
        <p style="color:#AFB4B8;">Remaining 18h 15min</p>
      </div>
    </header>
    <button style="background-color:#F96D4C;">
      Z
    </button>
    <!-- floating CTA button:  -->
    <section style="background-color:#323639;color:#696E71;">
      <div class="flex items-center">
        <!-- icon -->
        <p class="m-0">Memory Usage</p>
        <p class="m-0">40%</p>
      </div>
      <div class="flex items-center">
        <!-- icon -->
        <p class="m-0">Storage Available</p>
        <p class="m-0">4.8GB</p>
      </div>
      <div class="flex items-center">
        <!-- icon -->
        <p class="m-0">Background Processes</p>
        <p class="m-0">23</p>
      </div>
      <div class="flex items-center">
        <!-- icon -->
        <p class="m-0">Latest Full-charge</p>
        <p class="m-0">13:34</p>
      </div>
      <div class="flex items-center">
        <!-- icon -->
        <p class="m-0">Latest Full-charge</p>
        <p class="m-0">13:34</p>
      </div>
    </section>
    
    <script>
      // https://w3c.github.io/battery/#the-navigator-interface
      // We get the initial value when the promise resolves ...
      navigator.getBattery().then(function(battery) {
        console.log(battery);
        var batteryCharging = battery.charging;
        var batteryChargingTime = battery.charginTime;
        var dischargingTime = battery.dischargingTime;
        var level = battery.level;
        
        
        var dischargeDecimal = (dischargingTime / 3600);
        //  (.XX x 100 ) / 60
        //  .XX      ?
        //  ---  =  ----
        //  100      60
        
        console.log(window.performance.memory);
        
        
        
        var batteryLevel = Math.floor(level * 100) ;
        console.log('Battery level: ' + batteryLevel + '%');
        // ... and any subsequent updates.
        battery.onlevelchange = function() {
          console.log(this.level);
        };
      });
      
      function updateBatteryStatus(battery) {
        document.querySelector('#charging').textContent = battery.charging ? 'charging' : 'not charging';
        document.querySelector('#level').textContent = battery.level;
        document.querySelector('#dischargingTime').textContent = battery.dischargingTime / 60;
        
        navigator.getBattery().then(function(battery) {
        // Update the battery status initially when the promise resolves ...
          updateBatteryStatus(battery);
  
          // .. and for any subsequent updates.
          battery.onchargingchange = function () {
            updateBatteryStatus(battery);
          };
  
          battery.onlevelchange = function () {
            updateBatteryStatus(battery);
          };
  
          battery.ondischargingtimechange = function () {
            updateBatteryStatus(battery);
          };
        });
      }
    </script>
  </body>
</html>
