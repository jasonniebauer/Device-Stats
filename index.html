<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8"/>
    <title>My Battery</title>
  </head>
  <body>
    <script>
      // https://w3c.github.io/battery/#the-navigator-interface
      // We get the initial value when the promise resolves ...
      navigator.getBattery().then(function(battery) {
        console.log(battery);
        var batteryCharging = battery.charging;
        var batteryChargingTime = battery.charginTime;
        var dischargingTime = battery.dischargingTime;
        var level = battery.level;
        
        
        var dischargeDecimal = (dischargingTime / 3600);
        //  (.XX x 100 ) / 60
        //  .XX      ?
        //  ---  =  ----
        //  100      60
        
        console.log(window.performance.memory);
        
        
        
        var batteryLevel = Math.floor(level * 100) ;
        console.log('Battery level: ' + batteryLevel + '%');
        // ... and any subsequent updates.
        battery.onlevelchange = function() {
          console.log(this.level);
        };
      });
      
      function updateBatteryStatus(battery) {
        document.querySelector('#charging').textContent = battery.charging ? 'charging' : 'not charging';
        document.querySelector('#level').textContent = battery.level;
        document.querySelector('#dischargingTime').textContent = battery.dischargingTime / 60;
        
        navigator.getBattery().then(function(battery) {
        // Update the battery status initially when the promise resolves ...
          updateBatteryStatus(battery);
  
          // .. and for any subsequent updates.
          battery.onchargingchange = function () {
            updateBatteryStatus(battery);
          };
  
          battery.onlevelchange = function () {
            updateBatteryStatus(battery);
          };
  
          battery.ondischargingtimechange = function () {
            updateBatteryStatus(battery);
          };
        });
      }
    </script>
  </body>
</html>
